<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avaliação Nutricional Clínica</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Avaliação Nutricional Clínica</h1>
            <p>Sistema completo para avaliação nutricional de adultos e idosos</p>
        </header>

        <form id="avaliacaoForm">
            <!-- Seção 1: Dados do Paciente -->
            <section id="dadosPaciente" class="form-section">
                <h2>1. Dados do Paciente</h2>
                <div class="form-group">
                    <label for="nome">Nome completo:</label>
                    <input type="text" id="nome" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="idade">Idade (anos):</label>
                        <input type="number" id="idade" min="18" required>
                    </div>
                    <div class="form-group">
                        <label for="sexo">Sexo:</label>
                        <select id="sexo" required>
                            <option value="">Selecione</option>
                            <option value="masculino">Masculino</option>
                            <option value="feminino">Feminino</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="raca">Raça:</label>
                        <select id="raca" required>
                            <option value="">Selecione</option>
                            <option value="branca">Branca</option>
                            <option value="negra">Negra</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="comorbidades">Comorbidades:</label>
                    <textarea id="comorbidades" rows="3" placeholder="Ex: HAS, DM, dislipidemia..."></textarea>
                </div>
            </section>

            <!-- Seção 2: Medidas Antropométricas -->
            <section id="medidasAntropometricas" class="form-section">
                <h2>2. Medidas Antropométricas</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="pesoAtual">Peso Atual (kg):</label>
                        <input type="number" id="pesoAtual" step="0.1" min="0">
                    </div>
                    <div class="form-group">
                        <label for="pesoHabitual">Peso Habitual (kg):</label>
                        <input type="number" id="pesoHabitual" step="0.1" min="0">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="altura">Altura (cm):</label>
                        <input type="number" id="altura" min="0">
                    </div>
                    <div class="form-group">
                        <label for="alturaJoelho">Altura do Joelho (cm):</label>
                        <input type="number" id="alturaJoelho" min="0">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="circBraco">Circunferência do Braço (cm):</label>
                        <input type="number" id="circBraco" step="0.1" min="0">
                    </div>
                    <div class="form-group">
                        <label for="circPanturrilha">Circunferência da Panturrilha (cm):</label>
                        <input type="number" id="circPanturrilha" step="0.1" min="0">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="circPunho">Circunferência do Punho (cm):</label>
                        <input type="number" id="circPunho" step="0.1" min="0">
                    </div>
                    <div class="form-group">
                        <label for="emap">EMAP (mm):</label>
                        <input type="number" id="emap" step="0.1" min="0">
                    </div>
                </div>

                <div class="form-group">
                    <label for="dobraTricipital">Dobra Cutânea Tricipital (mm):</label>
                    <input type="number" id="dobraTricipital" step="0.1" min="0">
                </div>

                <div class="form-group">
                    <label>Condições Especiais:</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" id="edema"> Edema</label>
                        <label><input type="checkbox" id="ascite"> Ascite</label>
                        <label><input type="checkbox" id="amputacao"> Amputação</label>
                        <label><input type="checkbox" id="nenhuma">Nenhuma</label>
                    </div>
                </div>

                <div id="edemaOptions" class="sub-options" style="display: none;">
                    <label for="grauEdema">Grau de Edema:</label>
                    <select id="grauEdema">
                        <option value="1">+ (tornozelo) - 1kg</option>
                        <option value="2">++ (joelho) - 3-4kg</option>
                        <option value="3">+++ (base da coxa) - 5-6kg</option>
                        <option value="4">++++ (anasarca) - 10-12kg</option>
                    </select>
                </div>

                <div id="asciteOptions" class="sub-options" style="display: none;">
                    <label for="grauAscite">Grau de Ascite:</label>
                    <select id="grauAscite">
                        <option value="1">Leve - 2,2kg</option>
                        <option value="2">Moderada - 6kg</option>
                        <option value="3">Grave - 14kg</option>
                    </select>
                </div>

                <div id="amputacaoOptions" class="sub-options" style="display: none;">
                    <label for="tipoAmputacao">Tipo de Amputação:</label>
                    <select id="tipoAmputacao">
                        <option value="mao">Mão (0,8%)</option>
                        <option value="antebraco">Antebraço (2,3%)</option>
                        <option value="braco">Braço até o ombro (6,6%)</option>
                        <option value="pe">Pé (1,7%)</option>
                        <option value="pernaAbaixo">Perna abaixo do joelho (7%)</option>
                        <option value="pernaAcima">Perna acima do joelho (11%)</option>
                        <option value="pernaInteira">Perna inteira (18,6%)</option>
                    </select>
                    <label><input type="checkbox" id="amputacaoBilateral"> Amputação bilateral (dobrar porcentagem)</label>
                </div>

                <div class="form-actions">
                    <button type="button" id="calcularEstimativasBtn">Calcular Estimativas</button>
                </div>
            </section>

            <!-- Seção de Resultados de Estimativas -->
            <section id="resultadosEstimativas" class="results-section" style="display: none;">
                <h2>Resultados das Estimativas</h2>
                <div class="results-grid">
                    <div class="result-card">
                        <h3>Peso Estimado</h3>
                        <div id="pesoEstimadoResult"></div>
                    </div>
                    <div class="result-card">
                        <h3>Peso Ideal</h3>
                        <div id="pesoIdealResult"></div>
                    </div>
                    <div class="result-card">
                        <h3>Altura Estimada</h3>
                        <div id="alturaEstimadaResult"></div>
                    </div>
                </div>
            </section>

            <!-- Seção 3: Métodos de Estimativa -->
            <section id="metodosEstimativa" class="form-section" style="display: none;">
                <h2>3. Métodos de Estimativa</h2>
                
                <div class="form-group">
                    <label>Selecione o método para peso:</label>
                    <div class="radio-group">
                        <label><input type="radio" name="metodoPeso" value="atual" checked> Peso Atual (medido)</label>
                        <label><input type="radio" name="metodoPeso" value="habitual"> Peso Habitual</label>
                        <label><input type="radio" name="metodoPeso" value="estimado"> Peso Estimado</label>
                        <label><input type="radio" name="metodoPeso" value="ideal"> Peso Ideal</label>
                    </div>
                </div>

                <div class="form-group">
                    <label>Selecione o método para altura:</label>
                    <div class="radio-group">
                        <label><input type="radio" name="metodoAltura" value="medida" checked> Altura Medida</label>
                        <label><input type="radio" name="metodoAltura" value="estimada"> Altura Estimada</label>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" id="confirmarMetodosBtn">Confirmar Métodos</button>
                </div>
            </section>

            <!-- Seção 4: Fatores para Cálculo do GET -->
            <section id="fatoresGET" class="form-section" style="display: none;">
                <h2>4. Fatores para Cálculo do GET</h2>
                
                <div class="form-group">
                    <label for="fatorAtividade">Fator Atividade:</label>
                    <select id="fatorAtividade" required>
                        <option value="1.2">Paciente confinado ao leito (1.2)</option>
                        <option value="1.25">Paciente acamado, porém móvel (1.25)</option>
                        <option value="1.3">Paciente que deambula (1.3)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="fatorTermico">Fator Térmico:</label>
                    <select id="fatorTermico" required>
                        <option value="1.0">Sem febre (1.0)</option>
                        <option value="1.1">38°C (1.1)</option>
                        <option value="1.2">39°C (1.2)</option>
                        <option value="1.3">40°C (1.3)</option>
                        <option value="1.4">41°C (1.4)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="fatorInjuria">Fator Injúria:</label>
                    <select id="fatorInjuria" required>
                        <option value="1.0">Sem injúria (1.0)</option>
                        <option value="1.1">Infecção leve (1.1)</option>
                        <option value="1.2">Cirurgia pequeno porte (1.2)</option>
                        <option value="1.3">Câncer/AIDS (1.3)</option>
                        <option value="1.4">Sepse (1.4)</option>
                        <option value="1.5">Politraumatismo (1.5)</option>
                        <option value="1.6">Politraumatismo + sepse (1.6)</option>
                        <option value="1.75">Queimaduras 30-50% (1.75)</option>
                        <option value="2.0">Queimaduras >50% (2.0)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="formulaTMB">Fórmula para TMB:</label>
                    <select id="formulaTMB" required>
                        <option value="harris">Harris-Benedict</option>
                        <option value="faopeso">FAO/OMS (apenas peso)</option>
                        <option value="faopesoaltura">FAO/OMS (peso e altura)</option>
                        <option value="dri">DRI 2002</option>
                    </select>
                </div>
            </section>

            <!-- Seção 5: Distribuição de Macronutrientes -->
            <section id="macronutrientes" class="form-section" style="display: none;">
                <h2>5. Distribuição de Macronutrientes</h2>
                
                <div class="form-group">
                    <label for="proteinaKg">Proteína (g/kg/dia):</label>
                    <input type="number" id="proteinaKg" step="0.1" min="0" value="1.0">
                </div>

                <div class="form-group">
                    <label for="carboidratosPercent">Carboidratos (%VET):</label>
                    <input type="number" id="carboidratosPercent" min="0" max="100" value="50">
                </div>

                <div class="form-group">
                    <label for="lipidiosPercent">Lipídios (%VET):</label>
                    <input type="number" id="lipidiosPercent" min="0" max="100" value="30">
                </div>
            </section>

            <!-- Seção 6: Evolução Nutricional -->
            <section id="evolucaoNutricional" class="form-section" style="display: none;">
                <h2>6. Evolução Nutricional</h2>
                
                <div class="form-group">
                    <label>Formato:</label>
                    <div class="radio-group">
                        <label><input type="radio" name="formatoEvolucao" value="adima" checked> ADIMA</label>
                        <label><input type="radio" name="formatoEvolucao" value="soap"> SOAP HRCO</label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="evolucaoTexto">Evolução:</label>
                    <textarea id="evolucaoTexto" rows="10"></textarea>
                </div>

                <div class="form-actions">
                    <button type="button" id="preencherEvolucaoBtn">Preencher Modelo</button>
                </div>
            </section>

            <div class="form-actions" style="display: none;" id="finalActions">
                <button type="button" id="calcularBtn">Calcular Avaliação Completa</button>
                <button type="button" id="gerarPdfBtn">Gerar PDF</button>
                <button type="reset">Limpar Formulário</button>
            </div>
        </form>

        <!-- Resultados -->
        <section id="resultados" class="results-section" style="display: none;">
            <h2>Resultados da Avaliação</h2>
            
            <div class="results-grid">
                <div class="result-card">
                    <h3>Dados do Paciente</h3>
                    <div id="dadosPacienteResult"></div>
                </div>
                
                <div class="result-card">
                    <h3>Peso e Altura</h3>
                    <div id="pesoAlturaResult"></div>
                </div>
                
                <div class="result-card">
                    <h3>IMC</h3>
                    <div id="imcResult"></div>
                </div>
                
                <div class="result-card">
                    <h3>Circunferências</h3>
                    <div id="circunferenciasResult"></div>
                </div>
                
                <div class="result-card">
                    <h3>Perda de Peso</h3>
                    <div id="perdaPesoResult"></div>
                </div>
                
                <div class="result-card">
                    <h3>Necessidades Energéticas</h3>
                    <div id="energeticasResult"></div>
                </div>
                
                <div class="result-card">
                    <h3>Macronutrientes</h3>
                    <div id="macronutrientesResult"></div>
                </div>
                
                <div class="result-card">
                    <h3>Evolução Nutricional</h3>
                    <div id="evolucaoResult"></div>
                </div>
            </div>
        </section>
    </div>

    <script src="script.js"></script>
</body>
</html>